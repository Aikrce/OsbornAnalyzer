# GitHub Actions ä¿®å¤æ€»ç»“

## ğŸ” é—®é¢˜åˆ†æ

æ‚¨é‡åˆ°çš„ "Context access might be invalid: NPM_TOKEN" é”™è¯¯æ˜¯å› ä¸ºï¼š

1. **å¤šä¸ªé‡å¤çš„ workflow æ–‡ä»¶** - åŸæ¥æœ‰ 9 ä¸ªä¸åŒçš„ workflow æ–‡ä»¶
2. **NPM_TOKEN é…ç½®é—®é¢˜** - `release.yml` ä¸­ä½¿ç”¨äº†æœªé…ç½®çš„ `NPM_TOKEN` secret
3. **workflow å†²çª** - å¤šä¸ª workflow åŒæ—¶è¿è¡Œå¯¼è‡´å†²çª

## âœ… è§£å†³æ–¹æ¡ˆ

### 1. åˆ›å»ºç»Ÿä¸€çš„ workflow

- æ–°å»º `main.yml` ä½œä¸ºä¸»è¦çš„ CI/CD pipeline
- æ•´åˆäº†æµ‹è¯•ã€æ„å»ºå’Œéƒ¨ç½²åŠŸèƒ½
- ä½¿ç”¨æ­£ç¡®çš„ GitHub Pages éƒ¨ç½²æ–¹å¼

### 2. æ¸…ç†æ—§æ–‡ä»¶

åˆ é™¤äº†ä»¥ä¸‹ä¸éœ€è¦çš„ workflow æ–‡ä»¶ï¼š

- `ci.yml` - åŠŸèƒ½é‡å¤
- `deploy-pages-only.yml` - åŠŸèƒ½é‡å¤
- `deploy-pages-simple.yml` - åŠŸèƒ½é‡å¤
- `github-pages.yml` - åŠŸèƒ½é‡å¤
- `mobile.yml` - åŠŸèƒ½é‡å¤
- `release.yml` - **åŒ…å« NPM_TOKEN é”™è¯¯**
- `test-pages.yml` - åŠŸèƒ½é‡å¤

### 3. ä¿ç•™çš„æ–‡ä»¶

- `main.yml` - ä¸»è¦çš„ CI/CD pipeline
- `deploy.yml` - æ‰‹åŠ¨éƒ¨ç½²åˆ° Vercel/Netlify
- `performance.yml` - æ€§èƒ½ç›‘æ§ï¼ˆå®šæ—¶è¿è¡Œï¼‰

## ğŸš€ æ–°çš„ Workflow ç‰¹æ€§

### main.yml åŒ…å«ï¼š

- âœ… è‡ªåŠ¨æµ‹è¯•ï¼ˆç±»å‹æ£€æŸ¥ã€lintingã€å•å…ƒæµ‹è¯•ï¼‰
- âœ… è‡ªåŠ¨æ„å»º
- âœ… è‡ªåŠ¨éƒ¨ç½²åˆ° GitHub Pages
- âœ… æ­£ç¡®çš„æƒé™é…ç½®
- âœ… ä½¿ç”¨æœ€æ–°çš„ Actions ç‰ˆæœ¬

### è§¦å‘æ¡ä»¶ï¼š

- æ¨é€åˆ° `main` åˆ†æ”¯
- ç‰¹å®šæ–‡ä»¶è·¯å¾„å˜æ›´
- æ‰‹åŠ¨è§¦å‘

## ğŸ“‹ ä¸‹ä¸€æ­¥æ“ä½œ

1. **æäº¤æ›´æ”¹**

   ```bash
   git add .
   git commit -m "fix: ä¿®å¤ GitHub Actions workflow é…ç½®ï¼Œè§£å†³ NPM_TOKEN é”™è¯¯"
   git push origin main
   ```

2. **éªŒè¯éƒ¨ç½²**
   - è®¿é—® GitHub Actions é¡µé¢
   - æŸ¥çœ‹æ–°çš„ "Main CI/CD Pipeline" workflow
   - æ‰‹åŠ¨è§¦å‘æµ‹è¯•

3. **ç›‘æ§çŠ¶æ€**
   - ç¡®ä¿æ²¡æœ‰ NPM_TOKEN ç›¸å…³é”™è¯¯
   - æ£€æŸ¥ GitHub Pages éƒ¨ç½²æ˜¯å¦æˆåŠŸ

## ğŸ”§ æŠ€æœ¯ç»†èŠ‚

### ä¿®å¤çš„å…³é”®é—®é¢˜ï¼š

- ç§»é™¤äº†å¯¹ `NPM_TOKEN` çš„ä¾èµ–
- ç»Ÿä¸€äº† Node.js å’Œ pnpm ç‰ˆæœ¬
- ä½¿ç”¨æ­£ç¡®çš„ GitHub Pages éƒ¨ç½²æ–¹å¼
- ç®€åŒ–äº† workflow ç»“æ„

### é…ç½®éªŒè¯ï¼š

- âœ… Node.js ç‰ˆæœ¬: 20
- âœ… pnpm ç‰ˆæœ¬: 9.0.0
- âœ… GitHub Pages éƒ¨ç½²é…ç½®
- âœ… æƒé™è®¾ç½®æ­£ç¡®
- âœ… æ„å»ºè„šæœ¬å­˜åœ¨

## ğŸ“Š ç»“æœ

ç°åœ¨æ‚¨åº”è¯¥çœ‹åˆ°ï¼š

- ä¸å†æœ‰ NPM_TOKEN é”™è¯¯
- æ›´å°‘çš„ workflow å¤±è´¥
- æ›´å¿«çš„éƒ¨ç½²é€Ÿåº¦
- æ›´æ¸…æ™°çš„ workflow ç»“æ„

å¦‚æœè¿˜æœ‰é—®é¢˜ï¼Œè¯·æ£€æŸ¥ GitHub ä»“åº“çš„ Settings > Secrets é¡µé¢ï¼Œç¡®ä¿æ²¡æœ‰é—ç•™çš„æ— æ•ˆ secret é…ç½®ã€‚
