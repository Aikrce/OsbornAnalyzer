# GitHub Actionséƒ¨ç½²å¤±è´¥é—®é¢˜åˆ†æä¸è§£å†³æ–¹æ¡ˆ

## ğŸ“‹ é—®é¢˜æ¦‚è¿°

æœ¬æ–‡æ¡£åˆ†æäº†HuiTué¡¹ç›®åœ¨GitHub Actionséƒ¨ç½²è¿‡ç¨‹ä¸­é‡åˆ°çš„å¸¸è§é—®é¢˜ï¼Œå¹¶æä¾›äº†è¯¦ç»†çš„è§£å†³æ–¹æ¡ˆå’Œæœ€ä½³å®è·µã€‚

## ğŸ” æ ¸å¿ƒé—®é¢˜åˆ†æ

### ä¸»è¦é—®é¢˜ç±»å‹

- **NPM_TOKENé”™è¯¯æ’æŸ¥**
- **Gitè®¤è¯é—®é¢˜è§£å†³**
- **YAMLè¯­æ³•éªŒè¯**
- **ç¯å¢ƒä¾èµ–å…¼å®¹æ€§æ£€æŸ¥**
- **å®Œæ•´éƒ¨ç½²å·¥ä½œæµé…ç½®**

## ğŸ› ï¸ æŠ€æœ¯æ ˆä¿¡æ¯

```json
{
  "CI/CD": "GitHub Actions",
  "Package Manager": "pnpm",
  "Language": "TypeScript",
  "Frontend": "React + Vite",
  "Mobile": "Android + iOS"
}
```

## ğŸ“Š é—®é¢˜è§£å†³è¿›åº¦

### å·²å®Œæˆä»»åŠ¡ âœ…

- [x] åˆ†æGitHub Actionsæ—¥å¿—ï¼Œè¯†åˆ«å…·ä½“çš„é”™è¯¯ç±»å‹å’Œä½ç½®
- [x] æ£€æŸ¥NPM_TOKENé…ç½®ï¼ŒéªŒè¯å¯†é’¥æ ¼å¼å’Œæƒé™è®¾ç½®
- [x] æ’æŸ¥Gitè®¤è¯é—®é¢˜ï¼Œæ£€æŸ¥SSHå¯†é’¥æˆ–PATä»¤ç‰Œé…ç½®
- [x] éªŒè¯YAMLè¯­æ³•æ­£ç¡®æ€§ï¼Œæ£€æŸ¥ç¼©è¿›å’Œå…³é”®å­—ä½¿ç”¨
- [x] æ£€æŸ¥ç¯å¢ƒä¾èµ–é—®é¢˜ï¼Œç¡®è®¤Node.jsç‰ˆæœ¬å’Œpnpmå…¼å®¹æ€§
- [x] æä¾›é’ˆå¯¹æ¯ç§é”™è¯¯ç±»å‹çš„è¯¦ç»†è§£å†³æ–¹æ¡ˆå’Œä¿®å¤æ­¥éª¤
- [x] åˆ›å»ºå®Œæ•´çš„GitHub Actionså·¥ä½œæµé…ç½®ç¤ºä¾‹
- [x] ç¼–å†™éƒ¨ç½²é—®é¢˜æ’æŸ¥æŒ‡å—å’Œæœ€ä½³å®è·µæ–‡æ¡£

## ğŸš¨ å¸¸è§éƒ¨ç½²é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

### 1. NPM_TOKENé…ç½®é—®é¢˜

**é—®é¢˜æè¿°**: æ„å»ºè¿‡ç¨‹ä¸­å‡ºç°NPMè®¤è¯å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**:
```yaml
# åœ¨GitHubä»“åº“è®¾ç½®ä¸­æ·»åŠ secrets
NPM_TOKEN: your_npm_token_here
```

**éªŒè¯æ­¥éª¤**:
1. æ£€æŸ¥tokenæ ¼å¼æ˜¯å¦æ­£ç¡®
2. ç¡®è®¤tokenæƒé™æ˜¯å¦è¶³å¤Ÿ
3. éªŒè¯tokenæ˜¯å¦è¿‡æœŸ

### 2. Gitè®¤è¯é—®é¢˜

**é—®é¢˜æè¿°**: ä»£ç æ¨é€æˆ–æ‹‰å–æ—¶å‡ºç°è®¤è¯å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**:
```yaml
# ä½¿ç”¨Personal Access Token (PAT)
- name: Checkout code
  uses: actions/checkout@v4
  with:
    token: ${{ secrets.GITHUB_TOKEN }}
```

### 3. YAMLè¯­æ³•é”™è¯¯

**é—®é¢˜æè¿°**: GitHub Actionså·¥ä½œæµæ–‡ä»¶è¯­æ³•é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**:
- æ£€æŸ¥ç¼©è¿›æ˜¯å¦æ­£ç¡®ï¼ˆä½¿ç”¨2ä¸ªç©ºæ ¼ï¼‰
- éªŒè¯å…³é”®å­—æ‹¼å†™
- ç¡®ä¿æ‰€æœ‰æ­¥éª¤éƒ½æœ‰æ­£ç¡®çš„nameå’Œuses

### 4. ç¯å¢ƒä¾èµ–é—®é¢˜

**é—®é¢˜æè¿°**: Node.jsç‰ˆæœ¬ä¸å…¼å®¹æˆ–pnpmå®‰è£…å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**:
```yaml
- name: Setup Node.js
  uses: actions/setup-node@v4
  with:
    node-version: '18'
    cache: 'pnpm'
```

### 5. æ„å»ºå¤±è´¥é—®é¢˜

**é—®é¢˜æè¿°**: é¡¹ç›®æ„å»ºè¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥package.jsonä¸­çš„è„šæœ¬é…ç½®
2. ç¡®è®¤æ‰€æœ‰ä¾èµ–éƒ½å·²æ­£ç¡®å®‰è£…
3. éªŒè¯TypeScripté…ç½®æ˜¯å¦æ­£ç¡®

## ğŸ”§ å®Œæ•´å·¥ä½œæµé…ç½®ç¤ºä¾‹

```yaml
name: Deploy Web App to GitHub Pages

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout
      uses: actions/checkout@v4
      
    - name: Setup Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '18'
        cache: 'pnpm'
        
    - name: Install pnpm
      uses: pnpm/action-setup@v2
      with:
        version: 9
        
    - name: Install dependencies
      run: pnpm install
      
    - name: Build
      run: pnpm --filter @osborn/web build
      
    - name: Deploy to GitHub Pages
      uses: peaceiris/actions-gh-pages@v3
      if: github.ref == 'refs/heads/main'
      with:
        github_token: ${{ secrets.GITHUB_TOKEN }}
        publish_dir: ./apps/web/dist
```

## ğŸ“‹ éƒ¨ç½²æ£€æŸ¥æ¸…å•

### éƒ¨ç½²å‰æ£€æŸ¥
- [ ] GitHub Pageså·²å¯ç”¨
- [ ] å¿…è¦çš„secretså·²é…ç½®
- [ ] å·¥ä½œæµæ–‡ä»¶è¯­æ³•æ­£ç¡®
- [ ] æœ¬åœ°æ„å»ºæµ‹è¯•é€šè¿‡

### éƒ¨ç½²åéªŒè¯
- [ ] ç½‘ç«™å¯æ­£å¸¸è®¿é—®
- [ ] æ‰€æœ‰é¡µé¢è·¯ç”±æ­£å¸¸
- [ ] é™æ€èµ„æºåŠ è½½æ­£å¸¸
- [ ] åŠŸèƒ½æµ‹è¯•é€šè¿‡

## ğŸ¯ æœ€ä½³å®è·µå»ºè®®

### 1. ç¯å¢ƒé…ç½®
- ä½¿ç”¨å›ºå®šç‰ˆæœ¬çš„Node.jså’Œpnpm
- é…ç½®é€‚å½“çš„ç¼“å­˜ç­–ç•¥
- è®¾ç½®åˆç†çš„è¶…æ—¶æ—¶é—´

### 2. é”™è¯¯å¤„ç†
- æ·»åŠ è¯¦ç»†çš„é”™è¯¯æ—¥å¿—
- è®¾ç½®å¤±è´¥é€šçŸ¥æœºåˆ¶
- æä¾›å›æ»šæ–¹æ¡ˆ

### 3. æ€§èƒ½ä¼˜åŒ–
- ä½¿ç”¨å¹¶è¡Œæ„å»º
- ä¼˜åŒ–ä¾èµ–å®‰è£…
- å‡å°‘æ„å»ºæ—¶é—´

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚é‡åˆ°å…¶ä»–éƒ¨ç½²é—®é¢˜ï¼Œè¯·ï¼š

1. **æŸ¥çœ‹GitHub Actionsæ—¥å¿—**
   - è¿›å…¥ä»“åº“ â†’ Actions
   - æŸ¥çœ‹å…·ä½“é”™è¯¯ä¿¡æ¯

2. **æ£€æŸ¥æœ¬åœ°æ„å»º**
   ```bash
   pnpm --filter @osborn/web build
   ```

3. **éªŒè¯é…ç½®**
   - æ£€æŸ¥secretsé…ç½®
   - éªŒè¯å·¥ä½œæµæ–‡ä»¶è¯­æ³•

4. **è”ç³»æ”¯æŒ**
   - åˆ›å»ºGitHub Issue
   - æä¾›è¯¦ç»†çš„é”™è¯¯æ—¥å¿—

---

**æ–‡æ¡£ç±»å‹**: é—®é¢˜æ’æŸ¥æŒ‡å—  
**é€‚ç”¨åœºæ™¯**: GitHub Actionséƒ¨ç½²é—®é¢˜  
**ç»´æŠ¤è€…**: HuiTuå¼€å‘å›¢é˜Ÿ  
**æœ€åæ›´æ–°**: 2025-01-21
